let
  inherit (import ../../lib/env.nix) isCI;
in
{
  pkgs,
  inputs,
}:
with pkgs;
[
  inputs.agenix.packages.${stdenv.hostPlatform.system}.default
  pkgs.nur.repos.charmbracelet.crush
  age
  aichat
  # aider-chat  # FIXME: pyarrow 20.0.0 has malloc issues on macOS, uncomment when fixed
  argocd
  ast-grep
  awscli
  azure-cli
  bat
  broot
  bun
  clipse
  cloudflared
  copybara
  curl
  curlie
  cursor-cli
  delta
  doppler
  difftastic
  direnv
  doggo
  duf
  dust
  entr
  eza
  fastfetch
  fd
  fswatch
  fzf-make
  gh
  google-cloud-sdk
  git
  glance
  glow
  gnumake
  gping
  goose-cli
  grc
  htop
  httpie
  hyperfine
  jujutsu
  jq
  just
  k9s
  kind
  kubeconform
  kubectl
  kubectx
  kubernetes-helm
  kustomize
  llama-cpp
  mariadb
  mkcert
  navi
  postgresql
  procs
  # qwen-code  # FIXME: npmDepsHash is stale in nixpkgs, uncomment when fixed
  ripgrep
  sccache
  sd
  shellcheck
  shellspec
  speedtest-cli
  sqlite
  stern
  tealdeer
  tokei
  tree
  turso-cli
  uv
  watchexec
  wget
  yarn
  yazi
  yq
  zellij
  zoxide
]
++ lib.optionals stdenv.isLinux [
  atop
  below
  blueberry
  claude-code
  codex
  collectd
  docker
  docker-compose
  gemini-cli
  keychain
  opencode
  powertop
  tailscale
  trashy
]
++ lib.optionals (stdenv.isLinux && !isCI) [
  chromium
  ffmpeg
  github-desktop
  google-chrome
  signal-desktop
  vlc
]
