let
  inherit (import ../../lib/env.nix) isCI;
in
{
  pkgs,
  inputs,
}:
with pkgs;
[
  inputs.agenix.packages.${stdenv.hostPlatform.system}.default
  pkgs.nur.repos.charmbracelet.crush
  age
  aichat
  # aider-chat  # FIXME: pyarrow 20.0.0 has malloc issues on macOS, uncomment when fixed
  argocd
  ast-grep
  awscli
  azure-cli
  bat
  bun
  clipse
  cloudflared
  curl
  curlie
  cursor-cli
  delta
  doppler
  difftastic
  direnv
  duf
  dust
  eza
  fastfetch
  fd
  fswatch
  fzf-make
  gh
  google-cloud-sdk
  git
  gnumake
  goose-cli
  grc
  htop
  httpie
  hyperfine
  jq
  just
  k9s
  kind
  kubeconform
  kubectl
  kubectx
  kubernetes-helm
  kustomize
  llama-cpp
  mariadb
  postgresql
  procs
  pulumi-bin
  qwen-code
  ripgrep
  rustup
  sccache
  speedtest-cli
  sqlite
  stern
  tokei
  tree
  turso-cli
  uv
  wget
  yarn
  yazi
  yq
  zellij
  zoxide
]
++ lib.optionals stdenv.isLinux [
  atop
  below
  blueberry
  claude-code
  codex
  collectd
  docker
  docker-compose
  gemini-cli
  opencode
  powertop
  tailscale
]
++ lib.optionals (stdenv.isLinux && !isCI) [
  chromium
  ffmpeg
  github-desktop
  signal-desktop
  vlc
]
